---
title: "@mdx-js/mdx"
---

MDX ç¼–è¯‘å™¨.

## è¿™æ˜¯ä»€ä¹ˆï¼Ÿ

è¿™ä¸ªåŒ…æ˜¯ä¸€ä¸ªå°† MDX è½¬æ¢ä¸º JavaScript çš„ç¼–è¯‘å™¨ã€‚
å®ƒè¿˜å¯ä»¥è¯„ä¼° MDX ä»£ç ã€‚

## æˆ‘ä»€ä¹ˆæ—¶å€™è¯¥ç”¨è¿™ä¸ªï¼Ÿ

è¿™æ˜¯å°† MDX è½¬æ¢ä¸º JavaScript çš„æ ¸å¿ƒç¼–è¯‘å™¨ï¼Œå®ƒä¸ºæ‚¨æä¾›äº†æœ€å¤§çš„æ§åˆ¶æƒã€‚
å¦‚æœæ‚¨ä½¿ç”¨æ†ç»‘å™¨ï¼ˆRollupã€esbuildã€webpackï¼‰ã€ç«™ç‚¹æ„å»ºå™¨ï¼ˆNext.jsï¼‰æˆ–æ†ç»‘å™¨é™„å¸¦çš„æ„å»ºç³»ç»Ÿï¼ˆViteï¼‰ï¼Œåˆ™æœ€å¥½ä½¿ç”¨é›†æˆ: å‚è§[Â§é›†æˆ][integrations].

## å®‰è£…

æ­¤ç¨‹åºåŒ…[ä»…é™ ESM][esm].
åœ¨ Node.jsï¼ˆ16+ç‰ˆæœ¬ï¼‰ä¸­ï¼Œä½¿ç”¨[npm][]å®‰è£…:

```sh
npm install @mdx-js/mdx
```

In Deno with [`esm.sh`][esmsh]:

```tsx
import { compile } from "https://esm.sh/@mdx-js/mdx@3";
```

åœ¨å¸¦æœ‰[`esm.sh`][esmsh]çš„æµè§ˆå™¨ä¸­:

```html
<script type="module">
  import { compile } from "https://esm.sh/@mdx-js/mdx@3?bundle";
</script>
```

## ä½¿ç”¨

å‡è®¾æˆ‘ä»¬æœ‰ MDX æ–‡æ¡£, `example.mdx`:

```mdx
export function Thing() {
  return <>World!</>;
}

# Hello, <Thing />
```

â€¦ä»¥åŠ`example.js`ä¸­çš„ä¸€äº›ä»£ç å°†`example.mdx`ç¼–è¯‘ä¸º JavaScript:

```tsx
import fs from "node:fs/promises";
import { compile } from "@mdx-js/mdx";

const compiled = await compile(await fs.readFile("example.mdx"));

console.log(String(compiled));
```

è¾“å‡º:

```tsx
import { Fragment as _Fragment, jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";

export function Thing() {
  return _jsx(_Fragment, { children: "World!" });
}

function _createMdxContent(props) {
  const _components = { h1: "h1", ...props.components };
  return _jsxs(_components.h1, { children: ["Hello, ", _jsx(Thing, {})] });
}

export default function MDXContent(props = {}) {
  const { wrapper: MDXLayout } = props.components || {};
  return MDXLayout
    ? _jsx(MDXLayout, { ...props, children: _jsx(_createMdxContent, { ...props }) })
    : _createMdxContent(props);
}
```

æœ‰å…³ MDX å¦‚ä½•å·¥ä½œä»¥åŠå¦‚ä½•ä½¿ç”¨ç»“æœçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[Â§ä½¿ç”¨ MDX][using-mdx]ã€‚

## API

æ­¤åŒ…å¯¼å‡ºä»¥ä¸‹æ ‡è¯†ç¬¦:
[`compile`][api-compile],
[`compileSync`][api-compile-sync],
[`createProcessor`][api-create-processor],
[`evaluate`][api-evaluate],
[`evaluateSync`][api-evaluate-sync],
[`nodeTypes`][api-node-types],
[`run`][api-run], å’Œ
[`runSync`][api-run-sync].
æ²¡æœ‰é»˜è®¤å¯¼å‡ºã€‚

### `compile(file, options?)`

å°† MDX ç¼–è¯‘ä¸º JSã€‚

###### å‚æ•°

- `file` ([`Compatible` æ¥è‡ª `vfile`][vfile-compatible])
  â€” è¦åˆ†æçš„ MDX æ–‡æ¡£
- `options` ([`CompileOptions`][api-compile-options], å¯é€‰)
  â€” ç¼–è¯‘é…ç½®

###### è¿”å›

æ‰¿è¯ºç¼–è¯‘æ–‡ä»¶ ([`Promise<VFile>`][vfile]).

###### ç¤ºä¾‹

`file`çš„è¾“å…¥å€¼å¯ä»¥æ˜¯è®¸å¤šä¸åŒçš„å†…å®¹ã€‚
æ‚¨å¯ä»¥ä¼ é€’`string`ã€UTF-8 æ ¼å¼çš„`Uint8Array`ã€[`VFile`][vfile]æˆ–ä»»ä½•å¯ä»¥èµ‹äºˆ`new VFile`çš„å†…å®¹ã€‚

```tsx
import { compile } from "@mdx-js/mdx";
import { VFile } from "vfile";

await compile(":)");
await compile(Buffer.from(":-)"));
await compile({ path: "path/to/file.mdx", value: "ğŸ¥³" });
await compile(new VFile({ path: "path/to/file.mdx", value: "ğŸ¤­" }));
```

è¾“å‡º`VFile`å¯ç”¨äºè®¿é—®ç”Ÿæˆçš„ä»£ç ä»¥å¤–çš„å†…å®¹:

```tsx
import { compile } from "@mdx-js/mdx";
import remarkPresetLintConsistent from "remark-preset-lint-consistent"; // Lint rules to check for consistent markdown.
import { reporter } from "vfile-reporter";

const file = await compile("*like this* or _like this_?", { remarkPlugins: [remarkPresetLintConsistent] });

console.error(reporter(file));
```

è¾“å‡º:

```txt
  1:16-1:27  warning  Emphasis should use `*` as a marker  emphasis-marker  remark-lint

âš  1 warning
```

### `compileSync(file, options?)`

å°† MDX åŒæ­¥ç¼–è¯‘ä¸º JSã€‚

å¦‚æœå¯èƒ½ï¼Œè¯·ä½¿ç”¨ async[`compile`][api-compile].

###### å‚æ•°

- `file` ([`Compatible` from `vfile`][vfile-compatible])
  â€” è¦åˆ†æçš„ MDX æ–‡æ¡£
- `options` ([`CompileOptions`][api-compile-options], å¯é€‰)
  â€” ç¼–è¯‘é…ç½®

###### è¿”å›

å·²ç¼–è¯‘æ–‡ä»¶ ([`VFile`][vfile]).

### `createProcessor(options?)`

åˆ›å»ºä¸€ä¸ªå¤„ç†å™¨ï¼Œå°† markdown æˆ– MDX ç¼–è¯‘ä¸º JavaScriptã€‚

> **ç¬”è®°**: `format: 'detect'` åœ¨`ProcessorOptions`ä¸­ä¸å…è®¸.

###### å‚æ•°

- `options` ([`ProcessorOptions`][api-processor-options], å¯é€‰)
  â€” process configuration

###### è¿”å›

Processor ([`Processor` from `unified`][unified-processor]).

### `evaluate(file, options)`

[Compile][api-compile] and [run][api-run] MDX.

å½“ä½ ä¿¡ä»»ä½ çš„å†…å®¹æ—¶ï¼Œ`evaluate`å¯ä»¥èµ·ä½œç”¨ã€‚
å¦‚æœå¯èƒ½ï¼Œè¯·ä½¿ç”¨[`compile`][api-compile]ï¼Œå†™å…¥æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ Node è¿è¡Œï¼Œæˆ–è€…ä½¿ç”¨[Â§é›†æˆ][Integrations]ä¹‹ä¸€ã€‚

> â˜¢ï¸ **å±é™©**: å®ƒä¹‹æ‰€ä»¥è¢«ç§°ä¸º**evaluate**ï¼Œæ˜¯å› ä¸ºå®ƒæ˜¯ `eval` çš„ JavaScriptã€‚

###### å‚æ•°

- `file` ([`Compatible` from `vfile`][vfile-compatible])
  â€” è¦åˆ†æçš„ MDX æ–‡æ¡£
- `options` ([`EvaluateOptions`][api-evaluate-options], **required**)
  â€” é…ç½®

###### è¿”å›

å¯¹æ¨¡å—çš„æ‰¿è¯º ([`Promise<MDXModule>` from `mdx/types.js`][mdx-types-module]).

ç»“æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶`default`å­—æ®µè®¾ç½®ä¸ºç»„ä»¶;å…¶ä»–ä»»ä½•å¯¼å‡ºçš„å†…å®¹ä¹Ÿå¯ç”¨ã€‚
ä¾‹å¦‚ï¼Œå‡è®¾[Â§ä½¿ç”¨][Use]ä¸­çš„`example.mdx`çš„å†…å®¹åœ¨`file`ä¸­ï¼Œåˆ™ï¼š

```tsx
import { evaluate } from "@mdx-js/mdx";
import * as runtime from "react/jsx-runtime";

console.log(await evaluate(file, runtime));
```

â€¦yields:

```tsx
{Thing: [Function: Thing], default: [Function: MDXContent]}
```

###### ç¬”è®°

ç¼–è¯‘ï¼ˆå’Œè¿è¡Œï¼‰MDX éœ€è¦æ—¶é—´ã€‚

å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨åŸºäºè™šæ‹Ÿ DOM çš„æ¡†æ¶ï¼ˆå¦‚ Reactï¼‰å®æ—¶å‘ˆç°ç»å¸¸æ›´æ”¹çš„ MDX å­—ç¬¦ä¸²ï¼Œåˆ™ä¸€ä¸ªæ€§èƒ½æ”¹è¿›æ˜¯è‡ªå·±è°ƒç”¨`MDXContent`ç»„ä»¶ã€‚
åŸå› æ˜¯`evaluate`æ¯æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ— æ³•åŒºåˆ†çš„æ–°å‡½æ•°ï¼š

```diff
 const {default: MDXContent} = await evaluate('â€¦')

-<MDXContent {...props} />
+MDXContent(props)
```

### `evaluateSync(file, options)`

åŒæ­¥ç¼–è¯‘å¹¶è¿è¡Œ MDXã€‚

å¦‚æœå¯èƒ½ï¼Œè¯·ä½¿ç”¨ async[`evaluate`][api-evaluate].

> â˜¢ï¸ **å±é™©**: å®ƒä¹‹æ‰€ä»¥è¢«ç§°ä¸º**evaluate**ï¼Œæ˜¯å› ä¸ºå®ƒæ˜¯ eval çš„ JavaScriptã€‚

###### å‚æ•°

- `file` ([`Compatible` from `vfile`][vfile-compatible])
  â€” è¦åˆ†æçš„ MDX æ–‡æ¡£
- `options` ([`EvaluateOptions`][api-evaluate-options], **required**)
  â€” é…ç½®

###### è¿”å›

Module ([`MDXModule` from `mdx/types.js`][mdx-types-module]).

### `nodeTypes`

ç”±`mdast-util-mdx`ç”Ÿæˆçš„èŠ‚ç‚¹ç±»å‹åˆ—è¡¨ï¼Œè¿™äº›èŠ‚ç‚¹ç±»å‹å¿…é¡»ä» mdast æ ‘åŸå°ä¸åŠ¨åœ°ä¼ é€’åˆ° hast æ ‘ (`Array<string>`).

### `run(code, options)`

è¿è¡Œä½¿ç”¨`outputFormat: 'function-body'`ç¼–è¯‘çš„ä»£ç .

> â˜¢ï¸ **å±é™©**: è¿™æ˜¯ `eval` çš„ JavaScriptã€‚

###### å‚æ•°

- `code` ([`VFile`][vfile] æˆ– `string`)
  â€” è¦è¿è¡Œçš„ JavaScript å‡½æ•°ä½“
- `options` ([`RunOptions`][api-run-options], **required**)
  â€” é…ç½®

###### è¿”å›

å¯¹æ¨¡å—çš„æ‰¿è¯º ([`Promise<MDXModule>` æ¥è‡ª `mdx/types.js`][mdx-types-module]);
ç»“æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­`default`å­—æ®µè®¾ç½®ä¸ºè¯¥ç»„ä»¶ï¼›å…¶ä»–ä»»ä½•å¯¼å‡ºçš„å†…å®¹ä¹Ÿå¯ç”¨ã€‚

###### å®ä¾‹

åœ¨æœåŠ¡å™¨ä¸Š:

```tsx
import { compile } from "@mdx-js/mdx";

const code = String(await compile("# hi", { outputFormat: "function-body" }));
// To do: send `code` to the client somehow.
```

åœ¨å®¢æˆ·ç«¯ä¸Š:

```tsx
import { run } from "@mdx-js/mdx";
import * as runtime from "react/jsx-runtime";

const code = ""; // To do: get `code` from server somehow.

const { default: Content } = await run(code, { ...runtime, baseUrl: import.meta.url });

console.log(Content);
```

â€¦yields:

```tsx
[Function: MDXContent]
```

### `runSync(code, options)`

åŒæ­¥è¿è¡Œä»£ç ã€‚

å¦‚æœå¯èƒ½ï¼Œè¯·ä½¿ç”¨ async[`run`][api-run].

> â˜¢ï¸ **å±é™©**: è¿™æ˜¯ `eval` çš„ JavaScriptã€‚

###### å‚æ•°

- `code` ([`VFile`][vfile] or `string`)
  â€” è¦è¿è¡Œçš„ JavaScript å‡½æ•°ä½“
- `options` ([`RunOptions`][api-run-options], **required**)
  â€” é…ç½®

###### è¿”å›

Module ([`MDXModule` from `mdx/types.js`][mdx-types-module]).

### `CompileOptions`

`compile`çš„é…ç½® (TypeScript type).

`CompileOptions`ä¸[`ProcessorOptions`][api-processor-options]ç›¸åŒï¼Œä¸åŒä¹‹å¤„åœ¨äº`format`é€‰é¡¹æ”¯æŒé»˜è®¤çš„`'detect'`å€¼ã€‚
`'detect'`æ ¼å¼æ„å‘³ç€å¯¹æ‰©å±•åä¸º`mdExtensions`çš„æ–‡ä»¶ä½¿ç”¨`'md'`ï¼Œå¦åˆ™ä½¿ç”¨`mdx`ã€‚

###### ç±»å‹

```tsx
/**
 * Configuration for `compile`
 */
type CompileOptions = Omit<ProcessorOptions, "format"> & {
  /**
   * Format of `file` (default: `'detect'`).
   */
  format?: "detect" | "md" | "mdx" | null | undefined;
};
```

### `EvaluateOptions`

`evaluate`çš„é…ç½® (TypeScript type).

`EvaluateOptions` ä¸ç›¸åŒ [`CompileOptions`][api-compile-options],é™¤äº†é€‰é¡¹`baseUrl`, `jsx`, `jsxImportSource`, `jsxRuntime`,`outputFormat`, `pragma`, `pragmaFrag`, `pragmaImportSource`, å’Œ`providerImportSource` ä¸å…è®¸, å¹¶ä¸”è¿˜ä½¿ç”¨äº†[`RunOptions`][api-run-options]ã€‚

###### ç±»å‹

```tsx
/**
 * Configuration for `evaluate`.
 */
type EvaluateOptions = Omit<
  CompileOptions,
  | "baseUrl" // Note that this is also in `RunOptions`.
  | "jsx"
  | "jsxImportSource"
  | "jsxRuntime"
  | "outputFormat"
  | "pragma"
  | "pragmaFrag"
  | "pragmaImportSource"
  | "providerImportSource"
> &
  RunOptions;
```

### `Fragment`

è¡¨ç¤ºå­çº§ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªç¬¦å·ï¼ˆTypeScript ç±»å‹ï¼‰ã€‚

###### ç±»å‹

```ts
type Fragment = unknown;
```

### `Jsx`

åˆ›å»ºç”Ÿäº§å…ƒç´ ï¼ˆTypeScript ç±»å‹ï¼‰ã€‚

###### å‚æ•°

- `type` (`unknown`)
  â€” å…ƒç´ ç±»å‹: `Fragment` symbol, æ ‡è®°åç§° (`string`), ç»„ä»¶
- `properties` (`Properties`)
  â€” å…ƒç´ å±æ€§å’Œ`children`
- `key` (`string` æˆ– `undefined`)
  â€” è¦ä½¿ç”¨çš„ key

###### è¿”å›

æ¡†æ¶ä¸­çš„å…ƒç´  (`JSX.Element`).

### `JsxDev`

åˆ›å»ºå¼€å‘å…ƒç´  (TypeScript type).

###### å‚æ•°

- `type` (`unknown`)
  â€” å…ƒç´ ç±»å‹: `Fragment` symbol, tag name (`string`), component
- `properties` (`Properties`)
  â€” å…ƒç´ å±æ€§å’Œ`children`
- `key` (`string` or `undefined`)
  â€” è¦ä½¿ç”¨çš„ key
- `isStaticChildren` (`boolean`)
  â€” æ˜¯å¦ä¼ é€’äº†ä¸¤ä¸ªæˆ–å¤šä¸ªå­é¡¹ï¼ˆåœ¨æ•°ç»„ä¸­ï¼‰ï¼Œå³æ˜¯å¦ä½¿ç”¨`jsxs`æˆ–`jsx`
- `source` (`Source`)
  â€” å…³äºæ¥æºçš„ä¿¡æ¯
- `self` (`unknown`)
  â€” ä¸Šä¸‹æ–‡å¯¹è±¡ (`this`)

### `ProcessorOptions`

é…ç½®`createProcessor` (TypeScript ç±»å‹).

###### å­—æ®µ

- `SourceMapGenerator` (`SourceMapGenerator` æ¥è‡ª [`source-map`][source-map],å¯é€‰)
  â€” åœ¨ç”Ÿæˆçš„æ–‡ä»¶ä¸­æ·»åŠ æºæ˜ å°„ï¼ˆå¯¹è±¡å½¢å¼ï¼‰ä½œä¸º`map`å­—æ®µ

  <details>

  <summary>å±•å¼€ç¤ºä¾‹</summary>

  å‡è®¾[Â§ä½¿ç”¨][use]ä¸­çš„`example.mdx`å­˜åœ¨ï¼Œåˆ™ï¼š

  ```tsx
  import fs from "node:fs/promises";
  import { compile } from "@mdx-js/mdx";
  import { SourceMapGenerator } from "source-map";

  const file = await compile({ path: "example.mdx", value: await fs.readFile("example.mdx") }, { SourceMapGenerator });

  console.log(file.map);
  ```

  â€¦yields:

  ```tsx
  {
      file: 'example.mdx',
      mappings: ';;aAAaA,QAAQ;YAAQ;;;;;;;;iBAE3B',
      names: ['Thing'],
      sources: ['example.mdx'],
      version: 3
  }
  ```

  </details>

- `baseUrl` (`URL` æˆ– `string`, å¯é€‰, å®ä¾‹: `import.meta.url`)
  â€” å°†æ­¤ URL ç”¨ä½œ `import.meta.url`å¹¶è§£æç›¸å¯¹äºå®ƒçš„`import`å’Œ`export â€¦ from`

      <details>

        <summary>å±•å¼€ç¤ºä¾‹</summary>

        å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¨¡å—`example.js`ï¼š

        ```tsx
        import { compile } from "@mdx-js/mdx";

        const code = 'export {number} from "./data.js"\n\n# hi';
        const baseUrl = "https://a.full/url"; // Typically `import.meta.url`

        console.log(String(await compile(code, { baseUrl })));
        ```

        â€¦ç°åœ¨è¿è¡Œ`node-example.js`ä¼šäº§ç”Ÿï¼š

        ```tsx
        import { jsx as _jsx } from "react/jsx-runtime";
        export { number } from "https://a.full/data.js";
        function _createMdxContent(props) {
            /* â€¦ */
        }
        export default function MDXContent(props = {}) {
            /* â€¦ */
        }
        ```

      </details>

- `development` (`boolean`, é»˜è®¤: `false`)
  â€” æ˜¯å¦å‘ç”Ÿæˆçš„ä»£ç ä¸­çš„é”™è¯¯æ¶ˆæ¯æ·»åŠ é¢å¤–ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨å¼€å‘è‡ªåŠ¨ JSX è¿è¡Œæ—¶ï¼ˆæ¥è‡ª`/jsx-dev-runtime`çš„`Fragment`å’Œ`jsxDEV`ï¼‰ï¼›
  å½“é€šè¿‡ Vite ä½¿ç”¨ webpack åŠ è½½ç¨‹åºï¼ˆ`@mdx-js/loader`ï¼‰æˆ– Rollup é›†æˆï¼ˆ`@mdx-js/rollup`ï¼‰æ—¶ï¼Œè¿™æ˜¯ä»é…ç½®è¿™äº›å·¥å…·çš„æ–¹å¼è‡ªåŠ¨æ¨æ–­å‡ºæ¥çš„

      <details>

  <summary>å±•å¼€ç¤ºä¾‹</summary>

  å‡è®¾æˆ‘ä»¬æœ‰ä¸€äº› MDX å¼•ç”¨äº†ä¸€ä¸ªå¯ä»¥åœ¨è¿è¡Œæ—¶ä¼ é€’æˆ–æä¾›çš„ç»„ä»¶ï¼š

  ```mdx
  **Note**<NoteIcon />: some stuff.
  ```

  ä»¥åŠä¸€ä¸ªè¯„ä¼°æ¨¡å—ï¼š

  ```tsx
  import fs from "node:fs/promises";
  import { evaluate } from "@mdx-js/mdx";
  import * as runtime from "react/jsx-runtime";

  const path = "example.mdx";
  const value = await fs.readFile(path);
  const MDXContent = (await evaluate({ path, value }, { ...runtime, baseUrl: import.meta.url })).default;

  console.log(MDXContent({}));
  ```

  â€¦æ­£å¸¸ï¼ˆç”Ÿäº§ï¼‰äº§é‡çš„è¿è¡Œ:

  ```txt
  Error: Expected component `NoteIcon` to be defined: you likely forgot to import, pass, or provide it.
      at _missingMdxReference (eval at run (â€¦/@mdx-js/mdx/lib/run.js:18:10), <anonymous>:27:9)
      at _createMdxContent (eval at run (â€¦/@mdx-js/mdx/lib/run.js:18:10), <anonymous>:15:20)
      at MDXContent (eval at run (â€¦/@mdx-js/mdx/lib/run.js:18:10), <anonymous>:9:9)
      at main (â€¦/example.js:11:15)
  ```

  â€¦ä½†å¦‚æœæˆ‘ä»¬åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­åŠ ä¸Š`development: true`ï¼š

  ```diff
  @@ -7,6 +7,6 @@
  import fs from 'node:fs/promises'
  -import * as runtime from 'react/jsx-runtime'
  +import * as runtime from 'react/jsx-dev-runtime'
  import {evaluate} from '@mdx-js/mdx'

  const path = 'example.mdx'
  const value = await fs.readFile(path)
  -const MDXContent = (await evaluate({path, value}, {...runtime, baseUrl: import.meta.url})).default
  +const MDXContent = (await evaluate({path, value}, {development: true, ...runtime, baseUrl: import.meta.url})).default

  console.log(MDXContent({}))
  ```

  â€¦æˆ‘ä»¬ä¼šå†æ¬¡è¿è¡Œå®ƒï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°:

  ```txt
  Error: Expected component `NoteIcon` to be defined: you likely forgot to import, pass, or provide it.
  Itâ€™s referenced in your code at `1:9-1:21` in `example.mdx`
  provide it.
      at _missingMdxReference (eval at run (â€¦/@mdx-js/mdx/lib/run.js:18:10), <anonymous>:27:9)
      at _createMdxContent (eval at run (â€¦/@mdx-js/mdx/lib/run.js:18:10), <anonymous>:15:20)
      at MDXContent (eval at run (â€¦/@mdx-js/mdx/lib/run.js:18:10), <anonymous>:9:9)
      at main (â€¦/example.js:11:15)
  ```

      </details>

- `elementAttributeNameCase` (`'html'` æˆ– `'react`, é»˜è®¤: `'react'`)
  â€” ç”¨äºå±æ€§åç§°çš„å¤§å°å†™ï¼›
  HTML å¤§å°å†™ä¾‹å¦‚ï¼Œ `class`, `stroke-linecap`, `xml:lang`;
  React å¥—ç®¡ä¾‹å¦‚ï¼Œ `className`, `strokeLinecap`, `xmlLang`;
  å¯¹äºç”¨ MDX ç¼–å†™çš„ JSX ç»„ä»¶ï¼Œä½œè€…å¿…é¡»çŸ¥é“å®ƒä»¬ä½¿ç”¨çš„æ˜¯å“ªä¸ªæ¡†æ¶ï¼Œå¹¶ç›¸åº”åœ°ç¼–å†™ä»£ç ï¼›
  å¯¹äºæ­¤é¡¹ç›®ç”Ÿæˆçš„ AST èŠ‚ç‚¹ï¼Œæ­¤é€‰é¡¹å¯¹å…¶è¿›è¡Œé…ç½®

- `format` (`'md'` æˆ– `'mdx'`, é»˜è®¤: `'mdx'`)
  â€” æ–‡ä»¶çš„æ ¼å¼ï¼›
  `'md'`æ„å‘³ç€è§†ä¸º markdownï¼Œ`'mdx'`æ„å‘³ç€å°†å…¶è§†ä¸º[mdx][mdx-syntax]

      <details>

  <summary>å±•å¼€ç¤ºä¾‹</summary>

  ```tsx
  compile("â€¦"); // Seen as MDX.
  compile("â€¦", { format: "mdx" }); // Seen as MDX.
  compile("â€¦", { format: "md" }); // Seen as markdown.
  ```

      </details>

- `jsx` (`boolean`, é»˜è®¤: `false`)
  â€” æ˜¯å¦ä¿ç•™ JSXï¼›é»˜è®¤æƒ…å†µæ˜¯ç¼–è¯‘æ‰ JSXï¼Œè¿™æ ·ç”Ÿæˆçš„æ–‡ä»¶å°±å¯ä»¥ç«‹å³è¿è¡Œã€‚

      <details>

  <summary>å±•å¼€ç¤ºä¾‹</summary>

  å¦‚æœ`file`æ˜¯[Â§ä½¿ç”¨][Use]ä¸­`example.mdx`çš„å†…å®¹ï¼Œåˆ™ï¼š

  ```tsx
  compile(file, { jsx: true });
  ```

  â€¦äº§ç”Ÿè¿™ç§å·®å¼‚:

  ```diff
  -import {Fragment as _Fragment, jsx as _jsx, jsxs as _jsxs} from 'react/jsx-runtime'
  +/*@jsxRuntime automatic*/
  +/*@jsxImportSource react*/

  export function Thing() {
  -  return _jsx(_Fragment, {children: 'World'})
  +  return <>World!</>
  }

  function _createMdxContent(props) {
    const _components = {
      h1: 'h1',
      ...props.components
    }
  -  return _jsxs(_components.h1, {children: ['Hello ', _jsx(Thing, {})]})
  +  return <_components.h1>{"Hello "}<Thing /></_components.h1>
  }

  export default function MDXContent(props = {}) {
    const {wrapper: MDXLayout} = props.components || {}
    return MDXLayout
  -    ? _jsx(MDXLayout, {
  -        ...props,
  -        children: _jsx(_createMdxContent, props)
  -      })
  +    ? <MDXLayout {...props}><_createMdxContent {...props} /></MDXLayout>
      : _createMdxContent(props)
  }
  }
  ```

      </details>

- `jsxImportSource` (`string`, é»˜è®¤: `'react'`)
  â€” ä»ä¸­å¯¼å…¥è‡ªåŠ¨ JSX è¿è¡Œæ—¶çš„ä½ç½®ï¼›åœ¨`automatic`è¿è¡Œæ—¶ï¼Œå®ƒç”¨äºå®šä¹‰`Fragment`ã€`jsx`ã€`jsxDEV`å’Œ`jsxs`çš„å¯¼å…¥

      <details>

  <summary>å±•å¼€ç¤ºä¾‹</summary>

  å¦‚æœ`file`æ˜¯[Â§ä½¿ç”¨][Use]ä¸­`example.mdx`çš„å†…å®¹ï¼Œåˆ™ï¼š

  ```tsx
  compile(file, { jsxImportSource: "preact" });
  ```

  â€¦äº§ç”Ÿè¿™ç§å·®å¼‚:

  ```diff
  -import {Fragment as _Fragment, jsx as _jsx, jsxs as _jsxs} from 'react/jsx-runtime'
  +import {Fragment as _Fragment, jsx as _jsx, jsxs as _jsxs } from 'preact/jsx-runtime'
  ```

      </details>

- `jsxRuntime` (`'automatic'` æˆ– `'classic'`, é»˜è®¤: `'automatic'`)
  â€” è¦ä½¿ç”¨çš„ JSX è¿è¡Œæ—¶ï¼›è‡ªåŠ¨è¿è¡Œæ—¶ç¼–è¯‘ä¸º `import _jsx from '$importSource/jsx-runtime'\n_jsx('p')`;ç»å…¸çš„è¿è¡Œæ—¶ç¼–è¯‘ä¸ºè°ƒç”¨ï¼Œä¾‹å¦‚ `h('p')`

  > ğŸ‘‰ **ç¬”è®°**: å¯¹ç»å…¸è¿è¡Œæ—¶çš„æ”¯æŒå·²è¢«å¼ƒç”¨ï¼Œå¹¶å¯èƒ½åœ¨ä¸‹ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ä¸­è¢«åˆ é™¤ã€‚

<details>
  <summary>å±•å¼€ç¤ºä¾‹</summary>

å¦‚æœ`file`æ˜¯[Â§ä½¿ç”¨][use]ä¸­`example.mdx`çš„å†…å®¹ï¼Œåˆ™ï¼š

```tsx
compile(file, { jsxRuntime: "classic" });
```

â€¦äº§ç”Ÿè¿™ç§å·®å¼‚:

```diff
-import {Fragment as _Fragment, jsx as _jsx, jsxs as _jsxs} from 'react/jsx-runtime'
+import React from 'react'

export function Thing() {
-  return _jsx(_Fragment, {children: 'World'})
+  return React.createElement(React.Fragment, null, 'World!')
}
â€¦
```

</details>

- `outputFormat` (`'function-body'` æˆ– `'program'`, é»˜è®¤: `'program'`)
  â€” è¦ç”Ÿæˆçš„è¾“å‡ºæ ¼å¼ï¼›
  åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”è¯¥ä½¿ç”¨`program`ï¼Œå®ƒä¼šäº§ç”Ÿä¸€ä¸ªå®Œæ•´çš„ç¨‹åºï¼›
  å†…éƒ¨[`evaluate`][api-evaluate]ä½¿ç”¨`'function-body'`ç¼–è¯‘ä¸ºå¯ä»¥ä¼ é€’ç»™[`run`][api-run]çš„ä»£ç ï¼›
  åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½å¸Œæœ›åœ¨å•ç‹¬çš„æ­¥éª¤ä¸­æ‰§è¡Œ`evaluate`çš„æ“ä½œï¼Œä¾‹å¦‚åœ¨æœåŠ¡å™¨ä¸Šç¼–è¯‘å’Œåœ¨å®¢æˆ·ç«¯ä¸Šè¿è¡Œæ—¶ã€‚

      <details>

  <summary>å±•å¼€ç¤ºä¾‹</summary>

  ä½¿ç”¨æ¨¡å—`example.js`ï¼š

  ```tsx
  import { compile } from "@mdx-js/mdx";

  const code = "export const no = 3.14\n\n# hi {no}";

  console.log(String(await compile(code, { outputFormat: "program" }))); // Default.
  console.log(String(await compile(code, { outputFormat: "function-body" })));
  ```

  â€¦yields:

  ```tsx
  import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
  export const no = 3.14;
  function _createMdxContent(props) {
    /* â€¦ */
  }
  export default function MDXContent(props = {}) {
    /* â€¦ */
  }
  ```

  ```tsx
  "use strict";
  const { Fragment: _Fragment, jsx: _jsx } = arguments[0];
  const no = 3.14;
  function _createMdxContent(props) {
    /* â€¦ */
  }
  function MDXContent(props = {}) {
    /* â€¦ */
  }
  return { no, default: MDXContent };
  ```

  `'program'`æ ¼å¼å°†ä½¿ç”¨å¯¼å…¥è¯­å¥å¯¼å…¥è¿è¡Œæ—¶ï¼ˆä»¥åŠå¯é€‰çš„æä¾›ç¨‹åºï¼‰ï¼Œå¹¶ä½¿ç”¨å¯¼å‡ºè¯­å¥ç”Ÿæˆ`MDXContent`ç»„ä»¶ã€‚

  `'function-body'`æ ¼å¼å°†ä»`arguments[0]`ä¸­è·å–è¿è¡Œæ—¶ï¼ˆä»¥åŠå¯é€‰çš„æä¾›ç¨‹åºï¼‰ï¼Œé‡å†™å¯¼å‡ºè¯­å¥ï¼Œå¹¶ä½¿ç”¨è¿”å›è¯­å¥ç”Ÿæˆå¯¼å‡ºçš„å†…å®¹ã€‚

      </details>

- `mdExtensions` (`Array<string>`, é»˜è®¤: `['.md', '.markdown', '.mdown',
'.mkdn', '.mkd', '.mdwn', '.mkdown', '.ron']`)
  â€” å¸¦ç‚¹å½±å“çš„ markdownarkdown æ‰©å±•åˆ—è¡¨[Â§é›†æˆ][integrations]

- `mdxExtensions` (`Array<string>`, é»˜è®¤: `['.mdx']`)
  â€” MDX æ‰©å±•åˆ—è¡¨ï¼Œå¸¦ç‚¹ï¼›å½±å“[Â§æ•´åˆ][integrations]

- `pragma` (`string`, é»˜è®¤: `'React.createElement'`)
  â€” ç”¨äº JSX çš„ pragmaï¼Œåœ¨ç»å…¸è¿è¡Œæ—¶ä¸­ç”¨ä½œå‡½æ•°è°ƒç”¨çš„æ ‡è¯†ç¬¦ï¼š`<x />`åˆ°`React.createElement('x')`;
  æ›´æ”¹æ­¤é¡¹æ—¶ï¼Œè¿˜åº”å®šä¹‰`pragmaFrag`å’Œ`pragmaImportSource`

  > ğŸ‘‰ **ç¬”è®°**: å¯¹ç»å…¸è¿è¡Œæ—¶çš„æ”¯æŒå·²è¢«å¼ƒç”¨ï¼Œå¹¶å¯èƒ½åœ¨ä¸‹ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ä¸­è¢«åˆ é™¤ã€‚

      <details>

  <summary>å±•å¼€ç¤ºä¾‹</summary>

  å¦‚æœ`file`æ˜¯[Â§Use][use]ä¸­`example.mdx`çš„å†…å®¹ï¼Œåˆ™ï¼š

  ```tsx
  compile(file, {
    jsxRuntime: "classic",
    pragma: "preact.createElement",
    pragmaFrag: "preact.Fragment",
    pragmaImportSource: "preact/compat",
  });
  ```

  â€¦äº§ç”Ÿè¿™ç§å·®å¼‚:

  ```diff
  -import React from 'react'
  +import preact from 'preact/compat'

  export function Thing() {
  -  return React.createElement(React.Fragment, null, 'World!')
  +  return preact.createElement(preact.Fragment, null, 'World!')
  }
  â€¦
  ```

      </details>

- `pragmaFrag` (`string`, é»˜è®¤: `'React.Fragment'`)
  â€” ç”¨äºç‰‡æ®µç¬¦å·çš„ pragmaï¼Œåœ¨ç»å…¸è¿è¡Œæ—¶ç”¨ä½œæœªå‘½åè°ƒç”¨çš„æ ‡è¯†ç¬¦: `<>` åˆ° `React.createElement(React.Fragment)`;
  æ›´æ”¹æ­¤é¡¹æ—¶ï¼Œè¿˜åº”å®šä¹‰`pragma`å’Œ`pragmaImportSource`

  > ğŸ‘‰ **ç¬”è®°**: å¯¹ç»å…¸è¿è¡Œæ—¶çš„æ”¯æŒå·²è¢«å¼ƒç”¨ï¼Œå¹¶å¯èƒ½åœ¨ä¸‹ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ä¸­è¢«åˆ é™¤ã€‚

- `pragmaImportSource` (`string`, é»˜è®¤: `'react'`)
  â€” ä»ä½•å¤„å¯¼å…¥åœ¨ç»å…¸è¿è¡Œæ—¶ä¸­ä½¿ç”¨çš„`pragma`çš„æ ‡è¯†ç¬¦ï¼›
  æ¥è¯´æ˜,å½“`pragma`ä¸º`'a.b'`ä¸”`pragmaImportSource`ä¸º`'c'`æ—¶ï¼Œå°†ç”Ÿæˆä»¥ä¸‹å†…å®¹: `import a from 'c'` ä»¥åŠè¯¸å¦‚ `a.b('h1', {})`;
  æ›´æ”¹æ­¤é¡¹æ—¶ï¼Œè¿˜åº”å®šä¹‰`pragma`å’Œ`pragmaFrag`

  > ğŸ‘‰ **ç¬”è®°**: å¯¹ç»å…¸è¿è¡Œæ—¶çš„æ”¯æŒå·²è¢«å¼ƒç”¨ï¼Œå¹¶å¯èƒ½åœ¨ä¸‹ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ä¸­è¢«åˆ é™¤ã€‚

- `providerImportSource` (`string`, å¯é€‰, å®ä¾‹: `'@mdx-js/react'`)
  â€” å¯¼å…¥æä¾›è€…çš„ä½ç½®ï¼›
  é€šå¸¸ï¼Œå®ƒç”¨äºæ”¯æŒä¸Šä¸‹æ–‡ï¼ˆReactã€Preactï¼‰çš„è¿è¡Œæ—¶ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨äºå°†ç»„ä»¶æ³¨å…¥å·²ç¼–è¯‘çš„ä»£ç ä¸­ï¼›
  æ¨¡å—å¿…é¡»å¯¼å‡ºå’Œæ ‡è¯†ç¬¦`useMDXComponents`ï¼Œè¯¥æ ‡è¯†ç¬¦åœ¨ä¸å¸¦å‚æ•°çš„æƒ…å†µä¸‹è°ƒç”¨ä»¥è·å–ç»„ä»¶çš„å¯¹è±¡ (å‚çœ‹ [`UseMdxComponents`][api-use-mdx-components])

      <details>

  <summary>å±•å¼€ç¤ºä¾‹</summary>

  å¦‚æœ`file`æ˜¯[Â§ä½¿ç”¨][use]ä¸­`example.mdx`çš„å†…å®¹ï¼Œåˆ™ï¼š

  ```tsx
  compile(file, { providerImportSource: "@mdx-js/react" });
  ```

  â€¦äº§ç”Ÿè¿™ç§å·®å¼‚:

  ```diff
  import {Fragment as _Fragment, jsx as _jsx, jsxs as _jsxs} from 'react/jsx-runtime'
  +import {useMDXComponents as _provideComponents} from '@mdx-js/react'

  export function Thing() {
    return _jsx(_Fragment, {children: 'World'})
  }

  function _createMdxContent(props) {
    const _components = {
      h1: 'h1',
  +    ..._provideComponents(),
      ...props.components
    }
    return _jsxs(_components.h1, {children: ['Hello ', _jsx(Thing, {})]})
  }

  export default function MDXContent(props = {}) {
  -  const {wrapper: MDXLayout} = props.components || {}
  +  const {wrapper: MDXLayout} = {
  +    ..._provideComponents(),
  +    ...props.components
  +  }

    return MDXLayout
      ? _jsx(MDXLayout, {...props, children: _jsx(_createMdxContent, {})})
      : _createMdxContent()
  ```

      </details>

- `recmaPlugins` ([`PluggableList` from `unified`][unified-pluggable-list],å¯é€‰)
  â€” recma æ’ä»¶åˆ—è¡¨;
  è¿™æ˜¯ä¸€ä¸ªæ–°çš„ç”Ÿæ€ç³»ç»Ÿï¼Œç›®å‰æ­£å¤„äºæµ‹è¯•é˜¶æ®µï¼Œç”¨äºæ”¹é€ [esast][]æ ‘(JavaScript)

      <details>

  <summary>å±•å¼€ç¤ºä¾‹</summary>

  ```tsx
  import recmaMdxIsMdxComponent from "recma-mdx-is-mdx-component";

  await compile(file, { recmaPlugins: [recmaMdxIsMdxComponent] });
  ```

      </details>

- `rehypePlugins` ([`PluggableList` from `unified`][unified-pluggable-list],
  å¯é€‰)
  â€” [rehype æ’ä»¶]åˆ—è¡¨[rehype-plugins]

      <details>

  <summary>å±•å¼€ç¤ºä¾‹</summary>

  ```tsx
  import rehypeKatex from "rehype-katex"; // Render math with KaTeX.
  import remarkMath from "remark-math"; // Support math like `$so$`.

  await compile(file, { rehypePlugins: [rehypeKatex], remarkPlugins: [remarkMath] });

  await compile(file, {
    // A plugin with options:
    rehypePlugins: [[rehypeKatex, { strict: true, throwOnError: true }]],
    remarkPlugins: [remarkMath],
  });
  ```

      </details>

- `remarkPlugins` ([`PluggableList` æ¥è‡ª `unified`][unified-pluggable-list],
  å¯é€‰)
  â€” [remark æ’ä»¶]åˆ—è¡¨[remark-plugins]

      <details>

  <summary>å±•å¼€ç¤ºä¾‹</summary>

  ```tsx
  import remarkFrontmatter from "remark-frontmatter"; // YAML and such.
  import remarkGfm from "remark-gfm"; // Tables, footnotes, strikethrough, task lists, literal URLs.

  await compile(file, { remarkPlugins: [remarkGfm] }); // One plugin.
  await compile(file, { remarkPlugins: [[remarkFrontmatter, "toml"]] }); // A plugin with options.
  await compile(file, { remarkPlugins: [remarkGfm, remarkFrontmatter] }); // Two plugins.
  await compile(file, { remarkPlugins: [[remarkGfm, { singleTilde: false }], remarkFrontmatter] }); // Two plugins, first w/ options.
  ```

      </details>

- `remarkRehypeOptions` ([`Options` æ¥è‡ª `remark-rehype`][remark-rehype-options], å¯é€‰)
  â€” è¦ä¼ é€’åˆ°`remark-rehype`çš„é€‰é¡¹`;
é€‰é¡¹`allowDangerousHtml`å°†å§‹ç»ˆè®¾ç½®ä¸º`true`ï¼Œå¹¶ä¸”MDXèŠ‚ç‚¹(é¤å¡ [`nodeTypes`][api-node-types])å°†é€šè¿‡ï¼›
  ç‰¹åˆ«æ˜¯ï¼Œå¦‚æœæ‚¨çš„å†…å®¹ä¸æ˜¯è‹±æ–‡çš„ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä¼ é€’è„šæ³¨çš„é…ç½®

                                        <details>

  {" "}

  {" "}

  {" "}

  {" "}

  {" "}

  {" "}

  {" "}

  {" "}

  {" "}

  {" "}

  {" "}

  {" "}

  {" "}

  {" "}

  {" "}

  {" "}

  {" "}
  <summary>å±•å¼€ç¤ºä¾‹</summary>

  ```tsx
  compile({ value: "â€¦" }, { remarkRehypeOptions: { clobberPrefix: "comment-1" } });
  ```

                                        </details>

- `stylePropertyNameCase` (`'css'` æˆ– `'dom`, é»˜è®¤: `'dom'`)
  â€” ç”¨äº`style`å¯¹è±¡ä¸­çš„å±æ€§åç§°çš„å¤§å°å†™ï¼›
  ä¾‹å¦‚ï¼ŒCSS å¤§å°å†™ä¸º`background-color`ï¼Œå¹¶ä¸” `-webkit-line-clamp`;
  DOM å¤§å°å†™ä¸ºä¾‹å¦‚`backgroundColor`å’Œ`WebkitLineClamp`;
  å¯¹äºç”¨ MDX ç¼–å†™çš„ JSX ç»„ä»¶ï¼Œä½œè€…å¿…é¡»çŸ¥é“å®ƒä»¬ä½¿ç”¨çš„æ˜¯å“ªä¸ªæ¡†æ¶ï¼Œå¹¶ç›¸åº”åœ°ç¼–å†™ä»£ç ï¼›
  å¯¹äºæ­¤é¡¹ç›®ç”Ÿæˆçš„ AST èŠ‚ç‚¹ï¼Œæ­¤é€‰é¡¹å¯¹å…¶è¿›è¡Œé…ç½®

- `tableCellAlignToStyle` (`boolean`, é»˜è®¤: `true`)
  â€” å°†`td`å’Œ`th`ä¸Šè¿‡æ—¶çš„`align`å±æ€§è½¬æ¢ä¸º CSS çš„`style`å±æ€§

### `RunOptions`

è¿è¡Œç¼–è¯‘ä»£ç çš„é…ç½® (TypeScript ç±»å‹).

åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ç¼–è¯‘ä»£ç æ—¶ï¼Œå°†ä½¿ç”¨`Fragment`, `jsx`, å’Œ `jsxs` (`development: false`).
åœ¨å¼€å‘æ¨¡å¼ä¸‹ç¼–è¯‘æ—¶ä½¿ç”¨`Fragment` å’Œ `jsxDEV`(`development: true`).
`useMDXComponents` åœ¨ä½¿ç”¨`providerImportSource: '#'`ç¼–è¯‘ä»£ç æ—¶ä½¿ç”¨ (è¿™ä¸ªç¼–è¯‘é€‰é¡¹çš„ç¡®åˆ‡å€¼æ— å…³ç´§è¦).

###### å­—æ®µ

- `Fragment` ([`Fragment`][api-fragment], **å¿…é€‰**)
  â€” ç”¨äºç¢ç‰‡çš„ç¬¦å·
- `baseUrl` (`URL` æˆ– `string`, å¯é€‰ï¼Œç¤ºä¾‹: `import.meta.url`)
  â€” å°†æ­¤ URL ç”¨ä½œ`import.meta.url`ï¼Œå¹¶è§£æä¸å…¶ç›¸å…³çš„`import`å’Œ`export â€¦ from`ï¼›
  ä¹Ÿå¯ä»¥åœ¨ç¼–è¯‘æ—¶åœ¨`CompileOptions`ä¸­æä¾›æ­¤é€‰é¡¹ï¼›
  æ‚¨åº”è¯¥ä¼ é€’æ­¤ä¿¡æ¯ï¼ˆå¯èƒ½åœ¨è¿è¡Œæ—¶ï¼‰ï¼Œå› ä¸ºåœ¨ä½¿ç”¨`import.meta.url` / `import` / `export â€¦ from `æ—¶å¯èƒ½ä¼šå‡ºç°è¿è¡Œæ—¶é”™è¯¯ï¼Œå¦åˆ™
- `jsx` ([`Jsx`][api-jsx], å¯é€‰)
  â€” å‡½æ•°åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ç”Ÿæˆå…·æœ‰é™æ€å­é¡¹çš„å…ƒç´ 
- `jsxDEV` ([`JsxDev`][api-jsx-dev], å¯é€‰)
  â€” åœ¨å¼€å‘æ¨¡å¼ä¸­ç”Ÿæˆå…ƒç´ çš„å‡½æ•°
- `jsxs` ([`Jsx`][api-jsx], å¯é€‰)
  â€” ç”¨äºåœ¨ç”Ÿäº§æ¨¡å¼ä¸­ç”Ÿæˆå…·æœ‰åŠ¨æ€å­é¡¹çš„å…ƒç´ çš„å‡½æ•°
- `useMDXComponents` ([`UseMdxComponents`][api-use-mdx-components], å¯é€‰)
  â€” è·å–è¦ä½¿ç”¨çš„ç»„ä»¶çš„å‡½æ•°

###### ç¤ºä¾‹

`/jsx-runtime`æ¨¡å—å°†å…¬å¼€`Fragment`ã€`jsx`å’Œ`jsxs`ï¼š

```tsx
import * as runtime from "react/jsx-runtime";

const { default: Content } = await evaluate("# hi", { ...runtime, baseUrl: import.meta.url, ...otherOptions });
```

`/jsx-dev-runtime`æ¨¡å—å°†å…¬å¼€`Fragment`å’Œ`jsxDEV`ï¼š

```tsx
import * as runtime from "react/jsx-dev-runtime";

const { default: Content } = await evaluate("# hi", {
  development: true,
  baseUrl: import.meta.url,
  ...runtime,
  ...otherOptions,
});
```

æˆ‘ä»¬çš„æä¾›å•†å°†å…¬å¼€`useMDXComponents`ï¼š

```tsx
import * as provider from "@mdx-js/react";
import * as runtime from "react/jsx-runtime";

const { default: Content } = await evaluate("# hi", {
  ...provider,
  ...runtime,
  baseUrl: import.meta.url,
  ...otherOptions,
});
```

### `UseMdxComponents`

è·å–ç»„ä»¶ (TypeScript type).

###### å‚æ•°

æ²¡æœ‰å‚æ•°ã€‚

###### è¿”å›

ç»„ä»¶ ([`MDXComponents` æ¥è‡ª `mdx/types.js`][mdx-types-components]).

## ç±»å‹

æ­¤åŒ…æ˜¯ä½¿ç”¨[TypeScript][]å®Œå…¨é”®å…¥çš„.
å®ƒå¯¼å‡ºé™„åŠ ç±»å‹
[`CompileOptions`][api-compile-options],
[`EvaluateOptions`][api-evaluate-options],
[`Fragment`][api-fragment],
[`Jsx`][api-jsx],
[`JsxDev`][api-jsx-dev],
[`ProcessorOptions`][api-processor-options],
[`RunOptions`][api-run-options], and
[`UseMdxComponents`][api-use-mdx-components].

è¦ä½¿è¯„ä¼°çš„ MDX ç±»å‹æ­£å¸¸å·¥ä½œï¼Œè¯·ç¡®ä¿ TypeScript`JSX`å‘½åç©ºé—´æ˜¯ç±»å‹åŒ–çš„ã€‚
è¿™æ˜¯é€šè¿‡å®‰è£…å’Œä½¿ç”¨æ‚¨çš„æ¡†æ¶ç±»å‹æ¥å®Œæˆçš„, ä¾‹å¦‚[`@types/react`](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/HEAD/types/react).
æœ‰å…³ä¿¡æ¯ï¼Œè¯·å‚é˜…æˆ‘ä»¬ç½‘ç«™ä¸Šçš„[Â§ç±»å‹][types]ã€‚

## æ¶æ„

è¦äº†è§£è¿™ä¸ªé¡¹ç›®çš„ä½œç”¨ï¼Œé¦–å…ˆäº†è§£ unified çš„ä½œç”¨æ˜¯éå¸¸é‡è¦çš„: è¯·é€šè¯»[`unifiedjs/unified`][unified]è‡ªè¿°æ–‡ä»¶ (è¾¾åˆ° API éƒ¨åˆ†ä¹‹å‰çš„éƒ¨åˆ†æ˜¯å¿…è¯»çš„).

`@mdx-js/mdx` æ˜¯ä¸€ä¸ª unified çš„ç®¡é“â€”â€”è¢«åŒ…è£¹èµ·æ¥ï¼Œè¿™æ ·å¤§å¤šæ•°äººå°±ä¸éœ€è¦äº†è§£ unified: [`core.js#L65`][core].å¤„ç†å™¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤:

1. è§£æ MDX (ä½¿ç”¨åµŒå…¥å¼ JSXã€ESM å’Œè¡¨è¾¾å¼è¿›è¡Œåºåˆ—åŒ–æ ‡è®°)åˆ° mdast (markdown è¯­æ³•æ ‘)
2. é€šè¿‡ remark è¿›è¡Œè½¬æ¢ï¼ˆmarkdown ç”Ÿæ€ç³»ç»Ÿï¼‰
3. å°† mdast è½¬æ¢ä¸º hastï¼ˆHTML è¯­æ³•æ ‘ï¼‰
4. é€šè¿‡ rehype è¿›è¡Œè½¬æ¢ï¼ˆHTML ç”Ÿæ€ç³»ç»Ÿï¼‰
5. å°† hast è½¬æ¢ä¸º esastï¼ˆJS è¯­æ³•æ ‘ï¼‰
6. å®Œæˆè·å–ç»„ä»¶æ‰€éœ€çš„å·¥ä½œ
7. é€šè¿‡ recma è¿›è¡Œè½¬æ¢ï¼ˆJS ç”Ÿæ€ç³»ç»Ÿï¼‰
8. å°† esast åºåˆ—åŒ–ä¸º JavaScript

_è¾“å…¥_ æ˜¯ MDXï¼ˆä½¿ç”¨åµŒå…¥çš„ JSXã€ESM å’Œè¡¨è¾¾å¼è¿›è¡Œåºåˆ—åŒ–æ ‡è®°ï¼‰ã€‚
markdown ä½¿ç”¨[`micromark/micromark`][micromark]å’Œå¸¦æœ‰å…¶æ‰©å±•å[`micromark/micromark-extension-mdxjs`][micromark-extension-mdxjs](å®ƒåè¿‡æ¥ä½¿ç”¨[acorn][])ä¹‹ä¸€çš„åµŒå…¥å¼ JS è¿›è¡Œè§£æ.
ç„¶å[`syntax-tree/mdast-util-from-markdown`][mdast-util-from-markdown]åŠå…¶æ‰©å±•[`syntax-tree/mdast-util-mdx`][mdast-util-mdx]ç”¨äºå°†è§£æå™¨çš„ç»“æœè½¬æ¢ä¸ºè¯­æ³•æ ‘: [mdast][].

Markdown æœ€æ¥è¿‘æºæ ¼å¼ã€‚
è¿™å°±æ˜¯[remark æ’ä»¶][remark-plugins]çš„ç”¨æ­¦ä¹‹åœ°ã€‚
é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™é‡Œä¸åº”è¯¥å‘ç”Ÿå¤ªå¤šäº‹æƒ…ã€‚
ä½†ä¹Ÿè®¸ä½ æƒ³æ”¯æŒ GFMï¼ˆè¡¨æ ¼ç­‰ï¼‰æˆ– frontmatterï¼Ÿ
ç„¶åä½ å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ ä¸€ä¸ªæ’ä»¶: `remark-gfm` æˆ– `remark-frontmatter`, åˆ†åˆ«åœ°.

markdown åï¼Œæˆ‘ä»¬å» [hast][] (HTML).
æ­¤è½¬æ¢ç”±[`syntax-tree/mdast-util-to-hast`][mdast-util-to-hast]å®Œæˆ.
ç­‰ç­‰ï¼Œä¸ºä»€ä¹ˆï¼ŒHTML éœ€è¦ä»€ä¹ˆï¼Ÿ
éƒ¨åˆ†åŸå› æ˜¯æˆ‘ä»¬å…³å¿ƒ HTML è¯­ä¹‰ï¼šæˆ‘ä»¬æƒ³çŸ¥é“æŸä¸ªä¸œè¥¿æ˜¯`<a>`ï¼Œè€Œä¸æ˜¯å®ƒæ˜¯å¸¦æœ‰èµ„æº(`[text](url)`) çš„é“¾æ¥è¿˜æ˜¯å¯¹å·²å®šä¹‰é“¾æ¥å®šä¹‰çš„å¼•ç”¨(`[text][id]\n\n[id]: url`).
å› æ­¤ï¼ŒHTML AST æ›´*æ¥è¿‘*æˆ‘ä»¬æƒ³è¦å»çš„åœ°æ–¹ã€‚
å¦ä¸€ä¸ªåŸå› æ˜¯ï¼Œå½“äººä»¬ä½¿ç”¨ MDX -> JS,markdown -> HTML,ç”šè‡³é‚£äº›åªå¤„ç† HTML -> HTML çš„äººæ—¶ï¼Œä»–ä»¬éœ€è¦å¾ˆå¤šä¸œè¥¿ï¼šMDX ä»¥å¤–çš„ç”¨ä¾‹ã€‚
é€šè¿‡åœ¨è¿™äº›æƒ…å†µä¸‹ä½¿ç”¨ä¸€ä¸ª ASTï¼Œå¹¶ç¼–å†™ä¸€ä¸ªåœ¨è¯¥ AST ä¸Šå·¥ä½œçš„æ’ä»¶ï¼Œè¯¥æ’ä»¶å¯ä»¥æ”¯æŒ*æ‰€æœ‰*è¿™äº›ç”¨ä¾‹ (ä¾‹å¦‚, [`rehypejs/rehype-highlight`][rehype-highlight] ç”¨äºè¯­æ³•é«˜äº®æ˜¾ç¤º æˆ– [`rehypejs/rehype-katex`][rehype-katex] ç”¨äºæ•°å­¦).
æ‰€ä»¥ï¼Œè¿™å°±æ˜¯[rehype plugins][rehype-plugins]çš„ç”¨æ­¦ä¹‹åœ°ï¼šå¯èƒ½æ˜¯å¤§å¤šæ•°æ’ä»¶ã€‚

ç„¶åæˆ‘ä»¬è½¬åˆ° JavaScript: [esast][] (JS; AST ä¸ estree å…¼å®¹ï¼Œä½†çœ‹èµ·æ¥æ›´åƒå…¶ä»–ä¸­æ€§ AST).
æ­¤è½¬æ¢ç”±[`syntax-tree/hast-util-to-estree`][hast-util-to-estree]å®Œæˆ.
è¿™æ˜¯ä¸€ä¸ªæ–°çš„ç”Ÿæ€ç³»ç»Ÿï¼Œè¿˜æ²¡æœ‰å®ç”¨ç¨‹åºæˆ–æ’ä»¶ã€‚
ä½†è¿™æ­£æ˜¯`@mdx-js/mdx`å‘æŒ¥ä½œç”¨çš„åœ°æ–¹: åœ¨å…¶ä¸­æ·»åŠ å¯¼å…¥/å¯¼å‡ºï¼Œåœ¨å…¶ä¸­å°† JSX ç¼–è¯‘ä¸º`_jsx()`è°ƒç”¨, ä»¥åŠå®ƒåœ¨å“ªé‡Œåšå®ƒæä¾›çš„å…¶ä»–å¾ˆé…·çš„äº‹æƒ…ã€‚

æœ€åï¼Œè¾“å‡ºæ˜¯åºåˆ—åŒ–çš„ JavaScriptã€‚
æœ€åä¸€æ­¥æ˜¯é€šè¿‡[è·¨æ­¥][]å®Œæˆçš„, ä¸€ä¸ªå°å‹ä¸”å¿«é€Ÿçš„ JS ç”Ÿæˆå™¨ã€‚

## å…¼å®¹æ€§

unified é›†ä½“ç»´æŠ¤çš„é¡¹ç›®ä¸ Node.js çš„ç»´æŠ¤ç‰ˆæœ¬å…¼å®¹ã€‚

å½“æˆ‘ä»¬å‰ªåˆ‡ä¸€ä¸ªæ–°çš„ä¸»è¦ç‰ˆæœ¬æ—¶ï¼Œæˆ‘ä»¬ä¼šæ”¾å¼ƒå¯¹ Node çš„æœªç»´æŠ¤ç‰ˆæœ¬çš„æ”¯æŒã€‚
è¿™æ„å‘³ç€æˆ‘ä»¬è¯•å›¾ä¿æŒå½“å‰å‘å¸ƒè¡Œ`@mdx-js/mdx@^3`ä¸ Node.js 16 å…¼å®¹ã€‚

[build-badge]: https://github.com/mdx-js/mdx/workflows/main/badge.svg
[build]: https://github.com/mdx-js/mdx/actions
[coverage-badge]: https://img.shields.io/codecov/c/github/mdx-js/mdx/main.svg
[coverage]: https://codecov.io/github/mdx-js/mdx
[downloads-badge]: https://img.shields.io/npm/dm/@mdx-js/mdx.svg
[downloads]: https://www.npmjs.com/package/@mdx-js/mdx
[size-badge]: https://img.shields.io/bundlejs/size/@mdx-js/mdx
[size]: https://bundlejs.com/?q=@mdx-js/mdx
[sponsors-badge]: https://opencollective.com/unified/sponsors/badge.svg
[backers-badge]: https://opencollective.com/unified/backers/badge.svg
[collective]: https://opencollective.com/unified
[chat-badge]: https://img.shields.io/badge/chat-discussions-success.svg
[chat]: https://github.com/mdx-js/mdx/discussions
[npm]: https://docs.npmjs.com/cli/install
[contribute]: https://mdxjs.com/community/contribute/
[support]: https://mdxjs.com/community/support/
[coc]: https://github.com/mdx-js/.github/blob/main/code-of-conduct.md
[mit]: https://github.com/mdx-js/mdx/blob/main/packages/mdx/license
[vercel]: https://vercel.com
[source-map]: https://github.com/mozilla/source-map
[vfile]: https://github.com/vfile/vfile
[remark-plugins]: https://github.com/remarkjs/remark/blob/main/doc/plugins.md#list-of-plugins
[rehype-plugins]: https://github.com/rehypejs/rehype/blob/main/doc/plugins.md#list-of-plugins
[mdx-syntax]: https://mdxjs.com/docs/what-is-mdx/#mdx-syntax
[use]: #use
[unified]: https://github.com/unifiedjs/unified
[core]: https://github.com/mdx-js/mdx/blob/main/packages/mdx/lib/core.js#L65
[micromark]: https://github.com/micromark/micromark
[acorn]: https://github.com/acornjs/acorn
[micromark-extension-mdxjs]: https://github.com/micromark/micromark-extension-mdxjs
[mdast-util-from-markdown]: https://github.com/syntax-tree/mdast-util-from-markdown
[mdast-util-mdx]: https://github.com/syntax-tree/mdast-util-mdx
[mdast]: https://github.com/syntax-tree/mdast
[mdast-util-to-hast]: https://github.com/syntax-tree/mdast-util-to-hast
[hast]: https://github.com/syntax-tree/hast
[hast-util-to-estree]: https://github.com/syntax-tree/hast-util-to-estree
[rehype-highlight]: https://github.com/rehypejs/rehype-highlight
[rehype-katex]: https://github.com/remarkjs/remark-math/tree/main/packages/rehype-katex
[esast]: https://github.com/syntax-tree/esast
[astring]: https://github.com/davidbonnet/astring
[integrations]: https://mdxjs.com/getting-started/#integrations
[using-mdx]: https://mdxjs.com/docs/using-mdx/
[esm]: https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c
[esmsh]: https://esm.sh
[types]: https://mdxjs.com/getting-started/#types
[security]: https://mdxjs.com/getting-started/#security
[typescript]: https://www.typescriptlang.org
[mdx-types-components]: https://github.com/DefinitelyTyped/DefinitelyTyped/blob/HEAD/types/mdx/types.d.ts#L65
[mdx-types-module]: https://github.com/DefinitelyTyped/DefinitelyTyped/blob/HEAD/types/mdx/types.d.ts#L101
[remark-rehype-options]: https://github.com/remarkjs/remark-rehype#options
[unified-pluggable-list]: https://github.com/unifiedjs/unified#pluggablelist
[unified-processor]: https://github.com/unifiedjs/unified#processor
[vfile-compatible]: https://github.com/vfile/vfile#compatible
[api-compile]: #compilefile-options
[api-compile-options]: #compileoptions
[api-compile-sync]: #compilesyncfile-options
[api-create-processor]: #createprocessoroptions
[api-evaluate]: #evaluatefile-options
[api-evaluate-options]: #evaluateoptions
[api-evaluate-sync]: #evaluatesyncfile-options
[api-fragment]: #fragment
[api-jsx]: #jsx
[api-jsx-dev]: #jsxdev
[api-node-types]: #nodetypes
[api-processor-options]: #processoroptions
[api-run]: #runcode-options
[api-run-options]: #runoptions
[api-run-sync]: #runsynccode-options
[api-use-mdx-components]: #usemdxcomponents
